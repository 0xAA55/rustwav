# Rust 写的音频处理算法

这个项目是我尝试用 FFT 算法处理音频的一个项目。我想整自动生成电音的算法，奈何音调检测算法不给力，音乐会被整成阴乐 XD

## 命令行参数
```
evoice 输入文件.wav 输出文件.wav 目标频率 [窗口大小]
```
只支持 wav 格式。
目标频率一般设置 2048、4096 这样的数值。
窗口大小设置 0.1 秒。也可以不设置，默认就是 0.1。


## 源码在 `src/main.rs`

它先读取音频，按窗口大小分成一个个的块块，然后多线程整所有的块块，再存储音频。

整块块的时候，它用 FFT 变换为频域，遍历每个频率去统计大概的频率值。得到频率值后，根据目标频率，它对 FFT 频域进行邻近插值的方式来实现 Resample，然后再用 FFT 逆处理重新得到样本。

因为使用 FFT 频域进行 Resample 的方式会导致块块的大小发生变化（比如声波到后面就会变为静音），它切割掉淡出的尾部，然后复制块块直到大小满足窗口大小，再切掉多余的部分使大小刚好是窗口大小。

Resample 的算法本身没有问题，但是统计平均音调的算法好像不太行哈哈哈
